{% extends "client/base.html" %}
{% load static %}
{% block title %}Homepage - Confidential Trading Pvt. Ltd.{% endblock %}
{% block content %}
    <style>
        {% comment %} Carousal CSS {% endcomment %}
    .carousel-image-container {
        height: 200px;
    }

    @media (min-width: 640px) {
        .carousel-image-container {
            height: 280px;
        }
    }

    @media (min-width: 768px) {
        .carousel-image-container {
            height: 350px;
        }
    }

    @media (min-width: 1024px) {
        .carousel-image-container {
            height: 450px;
        }
    }

    @media (min-width: 1280px) {
        .carousel-image-container {
            height: 550px;
        }
    }

    #brand-carousel-wrapper {
        position: relative;
        height: 100%;
    }

    .carousel-item-fade {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        opacity: 0;
        transition: opacity 2s ease-in-out;
    }

    .carousel-item-fade.active {
        opacity: 1;
        z-index: 1;
    }

    .carousel-item-fade img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }
    
    {% comment %} Custom CSS for Hover Effects {% endcomment %}
    .image-hover-scale {
        transition: transform 0.3s ease-in-out;
    }

    .image-hover-scale:hover {
        transform: scale(1.05);
    }

    .card-hover-shadow {
        transition: box-shadow 0.3s ease-in-out;
    }

    .card-hover-shadow:hover {
        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
    }

    .section-hover-shadow:hover {
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
    }

    .btn-primary:focus {
        @apply ring ring-blue-300 ring-opacity-50;
    }
    .btn-secondary:focus {
        @apply ring ring-gray-300 ring-opacity-50;
    }

    {% comment %} Changes for permanent button visibility {% endcomment %}
    #prev-brand, #next-brand {
        opacity: 0.8; 
        z-index: 10;
    }

    {% comment %} FIXES FOR IPAD LANDSCAPE LAYOUT {% endcomment %}
    @media (min-width: 1024px) and (max-width: 1279px) {
        .grid.ipad-landscape-fix,
        .grid.ipad-landscape-product-fix {
            grid-template-columns: repeat(2, minmax(0, 1fr));
        }

        .grid.ipad-story-fix {
            grid-template-columns: repeat(1, minmax(0, 1fr));
        }
    }

    </style>
    <section class="py-20 md:py-28 rounded-3xl shadow-lg section-hover-shadow transition-shadow duration-300 ease-in-out mb-12"
             style="background-image: url('{% static 'images/homepage_hero.jpg' %}');
                    background-size: cover;
                    background-position: center">
        <div class="container mx-auto px-6 lg:px-12 max-w-7xl text-center">
            <h1 class="text-white text-4xl md:text-5xl lg:text-6xl font-extrabold mb-6 leading-tight max-w-4xl mx-auto">
                Nepal’s Premier Partner for Global FMCG Brands
            </h1>
            <p class="text-white text-lg md:text-xl lg:text-2xl mb-10 max-w-4xl mx-auto">
                Connecting premium global products with Nepalese consumers, ensuring quality, reliability, and unparalleled market reach.
            </p>
            <div class="flex flex-col sm:flex-row justify-center gap-8">
                <a href="{% url 'about_us' %}"
                   class="btn-primary inline-block bg-blue-600 text-white font-semibold px-8 py-3 rounded-full hover:bg-blue-700 transition duration-300 ease-in-out text-lg md:text-xl transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-blue-300 focus:ring-opacity-75">
                    Discover Our Story
                </a>
                <a href="https://wa.me/9851127689"
                   target="_blank"
                   class="btn-secondary inline-block bg-white text-blue-600 border border-blue-600 font-semibold px-8 py-3 rounded-full hover:bg-blue-50 hover:text-blue-700 transition duration-300 ease-in-out text-lg md:text-xl transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-blue-300 focus:ring-opacity-75">
                    Partner With Us
                </a>
            </div>
        </div>
    </section>
    <section class="py-16 md:py-24 bg-white rounded-2xl shadow-lg section-hover-shadow transition-shadow duration-300 ease-in-out mb-12">
        <div class="container mx-auto px-6 md:px-12 lg:px-24">
            <h2 class="text-3xl md:text-4xl font-bold text-center text-gray-900 mb-4">Our Esteemed Partner Brands</h2>
            <p class="text-md md:text-lg text-center text-gray-700 mb-12 max-w-3xl mx-auto">
                Explore the globally recognized brands we proudly represent and distribute across every corner of Nepal.
            </p>
            <div class="relative group">
                <div class="overflow-hidden rounded-2xl shadow-xl carousel-image-container">
                    <div id="brand-carousel-wrapper">
                        {% for brand_carousel in brand_carousels %}
                            <div class="carousel-item-fade">
                                <img src="{{ brand_carousel.image.url }}"
                                     alt="{{ brand_carousel.name }}"
                                     class="rounded-2xl image-hover-scale">
                                <div class="absolute bottom-0 left-0 bg-gradient-to-t from-gray-900 via-gray-900/70 to-transparent w-full p-6 md:p-8 rounded-b-2xl">
                                    <h3 class="text-base md:lg font-bold text-white mb-2">{{ brand_carousel.name }}</h3>
                                    <p class="text-gray-300 text-sm md:text-base">{{ brand_carousel.description }}</p>
                                </div>
                            </div>
                        {% empty %}
                            <div class="carousel-item-fade active">
                                <img src="{% static 'images/default_brand_carousal.jpg' %}"
                                     alt="No Brands Available"
                                     class="rounded-2xl image-hover-scale">
                                <div class="absolute bottom-0 left-0 bg-gradient-to-t from-gray-900 via-gray-900/70 to-transparent w-full p-6 md:p-8 rounded-b-2xl">
                                    <h3 class="text-base md:text-lg font-bold text-white mb-2">No Brands Listed Yet</h3>
                                    <p class="text-gray-300 text-sm md:text-base">
                                        We are diligently expanding our portfolio of premium global brands. Please check back soon for exciting updates and new partnerships.
                                    </p>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                </div>
                <button class="absolute top-1/2 left-4 -translate-y-1/2 bg-gray-800 text-white px-3 py-2 rounded-full shadow-lg opacity-80 hover:opacity-100 transition duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-gray-300 focus:ring-opacity-75"
                        id="prev-brand">
                    <i class="bi bi-chevron-left text-xl md:text-2xl"></i>
                </button>
                <button class="absolute top-1/2 right-4 -translate-y-1/2 bg-gray-800 text-white px-3 py-2 rounded-full shadow-lg opacity-80 hover:opacity-100 transition duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-gray-300 focus:ring-opacity-75"
                        id="next-brand">
                    <i class="bi bi-chevron-right text-xl md:text-2xl"></i>
                </button>
                <div class="flex justify-center mt-6 space-x-2" id="carousel-indicators"></div>
            </div>
        </div>
    </section>
    <section class="py-16 md:py-24 bg-gray-100 rounded-2xl shadow-lg section-hover-shadow transition-shadow duration-300 ease-in-out mb-12">
        <div class="container mx-auto px-6 md:px-12 lg:px-24">
            <h2 class="text-3xl md:text-4xl font-bold text-center text-gray-900 mb-4">Our Featured Products</h2>
            <p class="text-md md:text-lg text-center text-gray-700 mb-12 max-w-3xl mx-auto">
                Discover a selection of the trusted and beloved products we expertly distribute across the Nepalese market.
            </p>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3 gap-8 ipad-landscape-product-fix">
                {% for product in products|slice:":3" %}
                    <div class="bg-white rounded-2xl shadow-xl border border-gray-200 overflow-hidden flex flex-col card-hover-shadow p-6">
                        <div class="w-full h-48 md:h-56 lg:h-64 mb-4 rounded-xl overflow-hidden shadow-sm">
                            <img src="{{ product.image.url }}"
                                 alt="{{ product.name }}"
                                 class="w-full h-full object-contain image-hover-scale">
                        </div>
                        <h3 class="text-xl font-bold text-gray-800 mb-2 truncate">{{ product.name }}</h3>
                        <p class="text-gray-600 text-sm mb-4 line-clamp-3">{{ product.description }}</p>
                        <div class="mb-4 text-sm flex items-center">
                            <p class="text-gray-700 font-semibold mr-2 flex-shrink-0">
                                <i class="bi bi-hourglass-split mr-1 text-blue-500"></i>Self Life:
                            </p>
                            <span class="text-gray-800 font-medium">{{ product.self_life }}</span>
                        </div>
                        <div class="mb-4 text-sm">
                            <p class="text-gray-700 font-semibold mb-1">
                                <i class="bi bi-rulers mr-1 text-blue-500"></i>Available Sizes:
                            </p>
                            <div class="flex flex-wrap gap-2">
                                {% if product.get_available_sizes_list %}
                                    {% for size in product.get_available_sizes_list %}
                                        <span class="bg-blue-100 text-blue-800 text-xs px-3 py-1 rounded-full shadow-sm font-medium">#{{ size }}</span>
                                    {% endfor %}
                                {% else %}
                                    <span class="bg-gray-100 text-gray-800 text-xs px-3 py-1 rounded-full shadow-sm font-medium">N/A</span>
                                {% endif %}
                            </div>
                        </div>
                        <div class="mt-auto text-sm">
                            <p class="text-gray-700 font-semibold mb-1">
                                <i class="bi bi-box-seam-fill mr-1 text-blue-500"></i>Packaging:
                            </p>
                            <p class="text-gray-600">
                                {% if product.get_packaging_list %}
                                    {% for pack in product.get_packaging_list %}
                                        {{ pack }}
                                        {% if not forloop.last %},{% endif %}
                                    {% endfor %}
                                {% else %}
                                    Not Specified
                                {% endif %}
                            </p>
                        </div>
                    </div>
                {% empty %}
                    <div class="bg-white rounded-2xl shadow-xl border border-gray-200 overflow-hidden flex flex-col card-hover-shadow p-6">
                        <div class="w-full h-48 md:h-56 lg:h-64 mb-4 rounded-xl overflow-hidden shadow-sm">
                            <img src="{% static 'images/default_product.jpg' %}"
                                 alt="No Products Available"
                                 class="w-full h-full object-contain image-hover-scale">
                        </div>
                        <h3 class="text-xl font-bold text-gray-800 mb-2">No Products Available</h3>
                        <p class="text-gray-600 text-sm mb-4 line-clamp-3">
                            We are currently curating an exquisite selection of premium products to meet Nepal's market demands. Please check back soon for exciting additions to our catalog.
                        </p>
                        <div class="mb-4 text-sm flex items-center">
                            <p class="text-gray-700 font-semibold mr-2 flex-shrink-0">
                                <i class="bi bi-hourglass-split mr-1 text-blue-500"></i>Self Life:
                            </p>
                            <span class="text-gray-800 font-medium">Not Specified</span>
                        </div>
                        <div class="mb-4 text-sm">
                            <p class="text-gray-700 font-semibold mb-1">
                                <i class="bi bi-rulers mr-1 text-blue-500"></i>Available Sizes:
                            </p>
                            <div class="flex flex-wrap gap-2">
                                <span class="bg-gray-100 text-gray-800 text-xs px-3 py-1 rounded-full shadow-sm font-medium">N/A</span>
                            </div>
                        </div>
                        <div class="mt-auto text-sm">
                            <p class="text-gray-700 font-semibold mb-1">
                                <i class="bi bi-box-seam-fill mr-1 text-blue-500"></i>Packaging:
                            </p>
                            <p class="text-gray-600">N/A</p>
                        </div>
                    </div>
                {% endfor %}
            </div>
            {% if products.count > 3 %}
                <div class="flex justify-center mt-16">
                    <a href="{% url 'our_brands' %}"
                       class="btn-primary inline-block bg-blue-600 text-white font-semibold px-8 py-3 rounded-full hover:bg-blue-700 transition duration-300 ease-in-out text-base md:text-lg transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-blue-300 focus:ring-opacity-75">
                        Explore All Products
                    </a>
                </div>
            {% endif %}
        </div>
    </section>
    <section class="py-16 md:py-24 bg-white rounded-2xl shadow-lg section-hover-shadow transition-shadow duration-300 ease-in-out mb-12">
        <div class="container mx-auto px-6 md:px-12 lg:px-24 grid grid-cols-1 lg:grid-cols-2 gap-12 items-center ipad-story-fix">
            <div class="order-1 lg:order-2 relative rounded-2xl overflow-hidden">
                <img src="{% static 'images/kiran.jpg' %}"
                     alt="Our Story at Confidential Trading Pvt. Ltd."
                     class="w-full h-80 md:h-96 object-cover rounded-2xl shadow-xl image-hover-scale">
                <div class="absolute -bottom-5 left-0 bg-gradient-to-t from-gray-900 via-gray-900/70 to-transparent w-full p-6 md:p-8 rounded-b-2xl">
                    <p class="text-white text-sm text-center font-medium">Confidential Trading at Top of the World</p>
                </div>
            </div>
            <div class="order-2 lg:order-1">
                <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-6">Our Journey: Building Trust & Quality</h2>
                <p class="text-gray-700 text-base leading-relaxed mb-6">
                    Established in 2021, Confidential Trading Pvt. Ltd. swiftly became a leader in Nepal's import and distribution sector, specializing in high-quality, fresh FMCG products. Our strength lies in a robust understanding of the Nepalese market and a commitment to sourcing superior goods, ensuring both value and sustained customer satisfaction.
                </p>
                <p class="text-gray-700 text-base leading-relaxed mb-8">
                    Our success is driven by an experienced team proficient in every aspect of the supply chain—from intricate logistics and state-of-the-art warehousing to dynamic sales and marketing strategies. We foster deep, lasting relationships with both global brand partners and local customers, ensuring efficient operations and sustainable growth in Nepal's vibrant marketplace.
                </p>
                <a href="{% url 'about_us' %}"
                   class="btn-primary inline-block bg-blue-600 text-white font-semibold px-8 py-3 rounded-full hover:bg-blue-700 transition duration-300 ease-in-out text-base md:text-lg transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-blue-300 focus:ring-opacity-75">
                    Learn More About Us
                </a>
            </div>
        </div>
    </section>
    <section class="py-16 md:py-24 bg-gray-100 rounded-2xl shadow-lg section-hover-shadow transition-shadow duration-300 ease-in-out">
        <div class="container mx-auto px-6 md:px-12 lg:px-24">
            <h2 class="text-3xl md:text-4xl font-bold text-center text-gray-900 mb-4">Why Partner with Confidential Trading?</h2>
            <p class="text-md md:text-lg text-center text-gray-700 mb-12 max-w-3xl mx-auto">
                We are more than just distributors. We are committed to being your most reliable and effective partner for success in the Nepalese market.
            </p>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 ipad-landscape-fix">
                <div class="flex flex-col items-center text-center p-8 bg-white rounded-2xl border border-gray-200 shadow-xl card-hover-shadow">
                    <div class="p-6 rounded-2xl bg-yellow-100 text-yellow-600 mb-4 transform group-hover:scale-110 transition-transform duration-300 ease-in-out">
                        <i class="fa-solid fa-star text-4xl"></i>
                    </div>
                    <h3 class="text-xl font-semibold text-gray-900 mb-3">Uncompromising Quality</h3>
                    <p class="text-gray-700 text-sm">
                        We rigorously select and partner with globally acclaimed brands, guaranteeing only the highest quality products reach Nepalese consumers.
                    </p>
                </div>
                <div class="flex flex-col items-center text-center p-8 bg-white rounded-2xl border border-gray-200 shadow-xl card-hover-shadow">
                    <div class="p-6 rounded-2xl bg-blue-100 text-blue-600 mb-4 transform group-hover:scale-110 transition-transform duration-300 ease-in-out">
                        <i class="fa-solid fa-network-wired text-4xl"></i>
                    </div>
                    <h3 class="text-xl font-semibold text-gray-900 mb-3">Wide Distribution Network</h3>
                    <p class="text-gray-700 text-sm">
                        Our robust network ensures efficient and timely distribution across all major cities and even remote regions of Nepal.
                    </p>
                </div>
                <div class="flex flex-col items-center text-center p-8 bg-white rounded-2xl border border-gray-200 shadow-xl card-hover-shadow">
                    <div class="p-6 rounded-2xl bg-green-100 text-green-600 mb-4 transform group-hover:scale-110 transition-transform duration-300 ease-in-out">
                        <i class="fa-solid fa-handshake text-4xl"></i>
                    </div>
                    <h3 class="text-xl font-semibold text-gray-900 mb-3">Reliable Partnerships</h3>
                    <p class="text-gray-700 text-sm">
                        We cultivate strong, transparent relationships with our international partners, built on trust, efficiency, and mutual success.
                    </p>
                </div>
                <div class="flex flex-col items-center text-center p-8 bg-white rounded-2xl border border-gray-200 shadow-xl card-hover-shadow">
                    <div class="p-6 rounded-2xl bg-purple-100 text-purple-600 mb-4 transform group-hover:scale-110 transition-transform duration-300 ease-in-out">
                        <i class="fa-solid fa-truck text-4xl"></i>
                    </div>
                    <h3 class="text-xl font-semibold text-gray-900 mb-3">Seamless Logistics & Reach</h3>
                    <p class="text-gray-700 text-sm">
                        Benefit from our optimized supply chain and logistics, guaranteeing widespread market penetration and efficient delivery across Nepal.
                    </p>
                </div>
            </div>
        </div>
    </section>
    <script>
    const brandCarouselWrapper = document.getElementById('brand-carousel-wrapper');
    const prevBrandButton = document.getElementById('prev-brand');
    const nextBrandButton = document.getElementById('next-brand');
    const carouselIndicators = document.getElementById('carousel-indicators');
    const brandItems = brandCarouselWrapper.getElementsByClassName('carousel-item-fade');
    let currentBrandIndex = 0;
    let autoSlideInterval;

    if (brandItems.length > 0) {
        function showBrand(index) {
            for (let i = 0; i < brandItems.length; i++) {
                brandItems[i].classList.remove('active');
            }
            brandItems[index].classList.add('active');
            updateIndicators();
        }

        function updateIndicators() {
            carouselIndicators.innerHTML = '';
            for (let i = 0; i < brandItems.length; i++) {
                const indicatorButton = document.createElement('button');
                indicatorButton.classList.add('w-3', 'h-3', 'rounded-full', 'transition', 'duration-300', 'ease-in-out');
                if (i === currentBrandIndex) {
                    indicatorButton.classList.add('bg-gray-900');
                } else {
                    indicatorButton.classList.add('bg-gray-400');
                }
                indicatorButton.addEventListener('click', () => {
                    currentBrandIndex = i;
                    showBrand(currentBrandIndex);
                    resetAutoSlide();
                });
                carouselIndicators.appendChild(indicatorButton);
            }
        }

        function nextBrand() {
            currentBrandIndex = (currentBrandIndex < brandItems.length - 1) ? currentBrandIndex + 1 : 0;
            showBrand(currentBrandIndex);
        }

        function prevBrand() {
            currentBrandIndex = (currentBrandIndex > 0) ? currentBrandIndex - 1 : brandItems.length - 1;
            showBrand(currentBrandIndex);
        }

        // --- Pause on hover/touch, resume on mouse leave/touch end ---
        function pauseAutoSlide() {
            clearInterval(autoSlideInterval);
        }

        function resumeAutoSlide() {
            if (brandItems.length > 1) { // Only resume if there's more than one item
                startAutoSlide();
            }
        }

        // Event listeners for pausing and resuming
        brandCarouselWrapper.addEventListener('mouseenter', pauseAutoSlide);
        brandCarouselWrapper.addEventListener('mouseleave', resumeAutoSlide);
        
        // For touch devices (optional, but good practice)
        brandCarouselWrapper.addEventListener('touchstart', pauseAutoSlide);
        brandCarouselWrapper.addEventListener('touchend', resumeAutoSlide);
        // --- End of pause/resume functionality ---

        prevBrandButton.addEventListener('click', () => {
            prevBrand();
            resetAutoSlide(); // Keep auto-slide reset on manual interaction
        });

        nextBrandButton.addEventListener('click', () => {
            nextBrand();
            resetAutoSlide(); // Keep auto-slide reset on manual interaction
        });

        function startAutoSlide() {
            autoSlideInterval = setInterval(nextBrand, 4000);
        }

        function resetAutoSlide() {
            clearInterval(autoSlideInterval);
            startAutoSlide();
        }

        showBrand(currentBrandIndex);
        if (brandItems.length > 1) {
            startAutoSlide();
        } else {
            prevBrandButton.style.display = 'none';
            nextBrandButton.style.display = 'none';
            carouselIndicators.style.display = 'none';
        }
    } else {
        prevBrandButton.style.display = 'none';
        nextBrandButton.style.display = 'none';
        carouselIndicators.style.display = 'none';
    }
    </script>
{% endblock %}
